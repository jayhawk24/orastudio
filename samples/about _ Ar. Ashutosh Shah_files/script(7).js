!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=React},function(e,t){e.exports=PropTypes},function(e,t){e.exports=_},function(e,t){e.exports=Core},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n(8),i=(a=r)&&a.__esModule?a:{default:a};t.default=(0,i.default)({REVIEWS_SECTION_TITLE_RENDERED:null,REVIEWS_NO_DATA_RENDERED:null,REVIEWS_NOT_CONNECTED_MSG:null,PENDING_VALIDATION_HEADER:null,PENDING_VALIDATION_CONTENT:null,WAITING_FOR_DATA_HEADER:null,WAITING_FOR_DATA_CONTENT:null,SECTION_BACKGROUND:null,REVIEWS_BUSINESS_NAME_RENDERED:null,REVIEWS_CONNECT_BUTTON:null,USER_REVIEW_RENDERED:null,STATIC_REVIEW_RENDERED:null,READ_MORE_RENDERED:null,PRODUCT_LINK_RENDERED:null,REVIEW_TITLE_RENDERED:null,REVIEWER_INFO_RENDERED:null,REVIEWER_INITIAL_RENDERED:null,REVIEWER_PHOTO_RENDERED:null,RECOMMENDATION_RENDERED:null,RECOMMENDATION_ICON_RENDERED:null,RECOMMENDATION_TEXT_RENDERED:null,RECOMMENDATION_DESC_RENDERED:null,RATING_RENDERED:null,LEFT_ARROW_RENDERED:null,RIGHT_ARROW_RENDERED:null,UPGRADE_TIER_MSG:null,REVIEWS_LOADER:null}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.Providers={FACEBOOK:"facebook",YELP:"yelp",GMB:"gmb",YOTPO:"yotpo",MANUAL:"manual"},r=(t.ProviderConnectDataEvents={facebook:"REVIEWS_FB_CONNECT_CLICKED",yelp:"REVIEWS_YELP_CONNECT_CLICKED",gmb:"REVIEWS_GMB_CONNECT_CLICKED",yotpo:"REVIEWS_YOTPO_CONNECT_CLICKED"},t.ProviderIcon={facebook:"facebook2",yelp:"yelpLogoNegative",gmb:"gmb",yotpo:"yotpo"},t.ProviderAlternateIcon={facebook:"facebook",yelp:"yelpLogoNegative",gmb:"gmb",yotpo:"yotpo"},t.ProviderSource={facebook:"fb",yelp:"yelp",gmb:"gmb",yotpo:"yotpo"}),i=(t.RecommendationIcons={positive:"fbRecommends",negative:"fbDoesNotRecommend"},t.RecommendationStrings={positive:"recommends",negative:"doesNotRecommend"},t.ProviderName={facebook:"Facebook",gmb:"Google My Business",yelp:"Yelp",yotpo:"Yotpo"},t.ProviderPhotoUrls={facebook:"https://graph.facebook.com/v3.0/{id}/picture?height=100&width=100"},t.ProviderUrls={base:{facebook:"https://facebook.com",gmb:"https://maps.google.com",yelp:"https://www.yelp.com/biz"},photo:{facebook:"https://graph.facebook.com/v3.0/{id}/picture"}},t.STATES={NOT_SETUP:"NOT_SETUP",LOADING:"LOADING",HAS_REVIEWS:"HAS_REVIEWS",FAILED:"FAILED",NO_REVIEWS:"NO_REVIEWS",CONNECTED:"CONNECTED",NOT_CONNECTED:"NOT_CONNECTED"},t.ENV_CONFIG={reseller:{local:"dev-secureserver.net",development:"dev-secureserver.net",test:"test-secureserver.net",production:"secureserver.net"},godaddy:{local:"dev-godaddy.com",development:"dev-godaddy.com",test:"test-godaddy.com",production:"godaddy.com"}});t.ArrowType={LEFT:"LEFT",RIGHT:"RIGHT"},t.ConnectURLTemplate={facebook:"https://dashboard.{rootDomain}/fbPageCreate/{accountId}?home={home}",gmb:"https://dashboard.{rootDomain}/account/{accountId}/gmb",yelp:"https://dashboard.{rootDomain}/account/{accountId}/yelp",yotpo:"https://{websiteId}.onlinestore.{rootDomain}/admin/general_settings/edit#reviews"},t.UpgradeURLTemplate={yotpo:"https://launch.{rootDomain}/?account_uid={accountId}&path=plans"},t.getApiUrl=function(e,t,n){return n===a.YOTPO?"https://proxy.apps-api.instantpage."+i.reseller[e]+"/v1/proxy/yotpo?websiteId="+t:"https://proxy.apps-api.instantpage."+i.reseller[e]+"/v1/proxy/stats?id="+t+"&source="+r[n]},t.getConnectStatusUrl=function(e,t,n){return"https://proxy.apps-api.instantpage."+(n?i.reseller[e]:i.godaddy[e])+"/v1/proxy/social?accountId="+t},t.getRootDomain=function(e,t){return(t?i.reseller:i.godaddy)[e]},t.MAX_REVIEWS_COUNT=9},function(e,t,n){"use strict";window.wsb=window.wsb||{},window.wsb.ReviewsWidget=window.wsb.ReviewsWidget||n(7)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),o=g(i),l=g(n(1)),s=n(2),d=n(3),c=g(n(4)),u=g(n(9)),p=g(n(10)),f=n(5),m=n(13),E=n(14);function g(e){return e&&e.__esModule?e:{default:e}}var v=d.UX.MatchMedia,h=3,y=f.MAX_REVIEWS_COUNT,R=f.Providers.FACEBOOK,T={fontFamily:"Helvetica, Arial, sans-serif",textTransform:"none",fontSize:"16px"},b=[f.Providers.GMB,f.Providers.YELP],w=[f.Providers.YOTPO],C=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={data:{},currentPage:1,pages:0,provider:R,state:f.STATES.LOADING,isMobile:!1,cardsPerPage:h,dummyData:!1,planUpgradeRequired:!1},e.updateCurrentPage=e.updateCurrentPage.bind(e),e.updatePageCount=e.updatePageCount.bind(e),e.gotoPage=e.gotoPage.bind(e),e.getNavigationArrow=e.getNavigationArrow.bind(e),e.fetchDataForProviders=e.fetchDataForProviders.bind(e),e.getCards=e.getCards.bind(e),e.getPaginationControl=e.getPaginationControl.bind(e),e.handleMatchMedia=e.handleMatchMedia.bind(e),e.getConnectProviderHandler=e.getConnectProviderHandler.bind(e),e.displayConnectOrUpgradeMessage=e.displayConnectOrUpgradeMessage.bind(e),e.displayNoReviewsMessage=e.displayNoReviewsMessage.bind(e),e.renderMobileCards=e.renderMobileCards.bind(e),e.fetchData=e.fetchData.bind(e),e.getProvider=e.getProvider.bind(e),e.isProviderNotSetup=e.isProviderNotSetup.bind(e),e.checkConnectStatusForProvider=e.checkConnectStatusForProvider.bind(e),e.providerHasReviews=e.providerHasReviews.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"handleMatchMedia",value:function(e){var t=this.props,n=t.viewDevice,a=t.renderMode===d.constants.renderModes.PUBLISH?"xs"===e.size||"sm"===e.size:/mobile/i.test(n),r=a?1:h;this.setState({isMobile:a,cardsPerPage:r,size:e.size})}},{key:"generateReviewsStyles",value:function(){return{container:{textAlign:"center",display:"flex",flexDirection:"column"},cardsContainer:{position:"relative"},arrow:{width:"medium",position:"absolute",top:"50%",zIndex:1,cursor:"pointer",color:"section",":hover":{color:"rgba(288, 288, 288, 0.6)"}},grid:{alignItems:"center",justifyContent:"center"},paginationContainer:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"xlarge"},pageDot:{width:"12px",height:"12px",borderRadius:"50%",margin:"xsmall",cursor:"pointer",backgroundColor:"sectionContrast",opacity:.6,boxShadow:"1px 2px 15px 0 rgba(0,0,0,0.18)"},selected:{opacity:1},bottomLinkContainer:{display:"flex",justifyContent:"center",textAlign:"center",marginTop:"small",fontSize:"xsmall",color:"section"}}}},{key:"updateCurrentPage",value:function(e){var t=this;return function(){t.setState({currentPage:e})}}},{key:"gotoPage",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){var n=e.state,a=n.currentPage,r=n.pages,i=a+(t?1:-1);t?i>r&&(i=1):i<1&&(i=r),e.setState({currentPage:i})}}},{key:"getPageDotStyles",value:function(e){var t=this.state.currentPage,n=this.generateReviewsStyles(),a=n.pageDot;return t===e&&(a=(0,s.merge)({},n.pageDot,n.selected)),a}},{key:"fetchData",value:function(){var e=this,t=this.props,n=t.renderMode,a=t.providerType,r=t.planType,i=t.sourceType,o=t.manualReviews,l=t.staticContent;if(i===m.SOURCE_TYPES.STATIC)if(o.length){var s=(0,E.getMappedManualReviews)(o,l.anonymous);this.setState({data:s,state:f.STATES.HAS_REVIEWS}),this.updatePageCount(s)}else this.setState({state:f.STATES.NO_REVIEWS});else if(w.includes(a)&&"commerce"!==r)this.setState({planUpgradeRequired:!0,state:f.STATES.NOT_SETUP});else{this.setState({planUpgradeRequired:!1,state:f.STATES.LOADING});var c=this.getProvider();this.fetchDataForProviders(function(t){t?(e.setState({data:t,state:f.STATES.HAS_REVIEWS}),e.updatePageCount(t)):n===d.constants.renderModes.EDIT&&b.includes(c)&&e.checkConnectStatusForProvider(c)})}}},{key:"fetchDataForProviders",value:function(e){var t=this,n=this.props,a=n.websiteId,r=n.env,i=this.getProvider(),o=(0,f.getApiUrl)(r,a,i);if("production"!==String(r)){var l=window.location.search.indexOf("dummy=true");l>=0?(o=o+"&"+window.location.search.substring(l),this.setState({dummyData:!0})):this.setState({dummyData:!1})}if("undefined"!=typeof XMLHttpRequest){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){if(200===s.status){var n=JSON.parse(s.responseText);return n.updateDate?(t.setState({providerState:f.STATES.CONNECTED}),0===n.reviews.length?(t.setState({state:f.STATES.NO_REVIEWS}),void e(null)):(t.setState({state:f.STATES.HAS_REVIEWS}),void e(n))):(t.setState({state:f.STATES.NOT_SETUP,providerState:n.hasOwnProperty("connected")&&n.connected?f.STATES.CONNECTED:f.STATES.NOT_CONNECTED}),void e(null))}t.setState({state:f.STATES.FAILED})}e(null)},s.open("GET",o,!0),s.send()}}},{key:"checkConnectStatusForProvider",value:function(e){var t=this,n=this.props,a=n.accountId,r=n.env,i=n.isReseller;if("production"!==r&&this.state.dummyData)this.setState({providerState:f.STATES.CONNECTED});else{var o=(0,f.getConnectStatusUrl)(r,a,i);if("undefined"!=typeof XMLHttpRequest){var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState&&200===l.status){var n=JSON.parse(l.responseText);t.setConnectStatus(n,e)}},l.open("GET",o,!0),l.withCredentials=!0,l.send(null)}}}},{key:"setConnectStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Providers.GMB,n=e&&e[t];if(n){var a=Object.keys(n)&&Object.keys(n)[0]||null,r=a&&n[a]&&n[a].status||f.STATES.NOT_CONNECTED,i="PUBLISHED"===r?f.STATES.CONNECTED:r;this.setState({providerState:i})}else this.setState({providerState:f.STATES.NOT_CONNECTED})}},{key:"componentDidUpdate",value:function(e){this.props.providerType!==e.providerType||this.props.sourceType!==e.sourceType?this.fetchData():this.props.sourceType!==m.SOURCE_TYPES.STATIC||(0,s.isEqual)(e.manualReviews,this.props.manualReviews)||this.fetchData()}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getProvider",value:function(){var e=this.props,t=e.sourceType,n=e.providerType;return t===m.SOURCE_TYPES.STATIC?f.Providers.MANUAL:n||R}},{key:"updatePageCount",value:function(e){var t=this.state.cardsPerPage,n=0,a=e.reviews.length>y?y:e.reviews.length;a&&(n=Math.floor(a/t),n+=a/t%1>0?1:0),this.setState({pages:n})}},{key:"getPageLink",value:function(e,t){if(t===f.Providers.MANUAL)return null;var n=f.ProviderUrls.base[t];return e&&e.metadata&&(e.metadata.pageId||e.metadata.link)&&(t===f.Providers.FACEBOOK?n=n+"/"+e.metadata.pageId+"/reviews":t===f.Providers.GMB?n=n+"/maps?cid="+e.metadata.pageId:t===f.Providers.YELP?n=n+"/"+e.metadata.pageId:t===f.Providers.YOTPO&&(n=e.metadata.link||"/")),n}},{key:"renderMobileCards",value:function(e){var t=e.data,n=e.provider,a=e.isMobile,r=e.pageLink,i=e.staticContent,l=e.desktopMobilePreview,s=e.renderMode,c=e.market,u=this.props.sourceType;if(!t.reviews)return null;var f=l?"80%":"310px",m=t.reviews.length>1;return o.default.createElement(d.UX.Carousel,{slideHeight:"400px",viewportWidth:"100%",slideWidth:f,cellPadding:10,initialSlide:m?1:0,clickToNavigate:!1,infinite:m,dots:!1,arrows:!1,style:{slide:{opacity:"1",verticalAlign:"top"},selectedSlide:{opacity:"1"}}},Array.from(Array(t.reviews.length).keys()).map(function(e){return t.reviews&&t.reviews[e]&&o.default.createElement(p.default,{desktopMobilePreview:l,key:"mobile-review-card-"+e,data:t.reviews[e],provider:n,isMobile:a,market:c,staticContent:i,renderMode:s,link:r,sourceType:u})}))}},{key:"getCards",value:function(){var e=this,t=this.state,n=t.currentPage,a=t.data,r=t.isMobile,i=t.cardsPerPage,l=t.size,c=this.props,u=c.renderMode,f=c.viewDevice,m=c.staticContent,E=c.market,g=c.sourceType,v=this.getProvider(),h=n*i,y=this.generateReviewsStyles(),R=this.getPageLink(a,v),T=u===d.constants.renderModes.PREVIEW&&"MOBILE_RENDER_DEVICE"===String(f)&&window.innerWidth>768;return r?this.renderMobileCards({data:a,provider:v,isMobile:r,pageLink:R,staticContent:m,desktopMobilePreview:T,size:l,renderMode:u,market:E}):o.default.createElement(d.UX2.Component.Grid,{xs:1,md:12,style:y.grid},(0,s.takeRight)([h-3,h-2,h-1],i).map(function(t){return a.reviews&&a.reviews[t]&&o.default.createElement(d.UX2.Component.Grid.Cell,{key:t,md:4},o.default.createElement(p.default,{data:a.reviews[t],provider:v,isMobile:r,nextPageHandler:e.gotoPage(!0),previousPageHandler:e.gotoPage(!1),staticContent:m,market:E,renderMode:u,link:R,sourceType:g}))}))}},{key:"getNavigationArrow",value:function(e){var t=this.props,n=t.hasBgImage,a=t.category,r=t.section,i=this.generateReviewsStyles(),l=(0,s.merge)({},i.arrow,{left:"-40px"}),u=this.gotoPage(!1),p="chevronLeft",m=c.default.LEFT_ARROW_RENDERED;return e===f.ArrowType.RIGHT&&(l=(0,s.merge)({},i.arrow,{right:"-35px"}),u=this.gotoPage(!0),p="chevronRight",m=c.default.RIGHT_ARROW_RENDERED),o.default.createElement(d.UX2.Element.Block,{"data-aid":m,category:n?"accent":a,section:n?"overlay":r,onClick:u,style:l},o.default.createElement(d.UX2.Element.Icon,{icon:p}))}},{key:"getPaginationControl",value:function(){var e=this,t=this.state.pages;if(t<=1)return null;var n=this.generateReviewsStyles();return o.default.createElement(d.UX2.Element.Block,{style:n.paginationContainer},Array.from(Array(t).keys()).map(function(n){var a=n+1;return t>=a?o.default.createElement(d.UX2.Element.Block,{style:e.getPageDotStyles(a),onClick:e.updateCurrentPage(a)}):null}))}},{key:"getConnectProviderHandler",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){var n=e.props,a=n.isReseller,r=n.env,i=n.accountId,o=n.websiteId,l=e.getProvider(),s=(0,f.getRootDomain)(r,a),d=window.location.href,c=t?f.UpgradeURLTemplate:f.ConnectURLTemplate;window.location.href=c[l].replace("{rootDomain}",s).replace("{accountId}",i).replace("{websiteId}",o).replace("{home}",d)}}},{key:"renderMessageInContainer",value:function(e,t,n,a){if(!e)return null;var r={container:{display:"flex",flexDirection:"column",textAlign:"center",justifyContent:"center",marginTop:"large"},messageBlock:{paddingHorizontal:n?"xsmall":"xxlarge",paddingVertical:n?"large":"xlarger",fontSize:"large",color:"section",margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",backgroundColor:"section"},icon:{width:"45px",height:"45px",marginBottom:"medium"}};return o.default.createElement(d.UX2.Element.Container,{style:r.container},o.default.createElement(d.UX2.Element.Block,{category:"accent",section:"overlay",style:r.messageBlock},o.default.createElement(d.UX2.Element.Block,null,o.default.createElement(d.UX2.Element.Icon,{icon:f.ProviderIcon[a],style:r.icon}),e)))}},{key:"displayNoReviewsMessage",value:function(){var e=this.state.isMobile,t=this.props,n=t.staticContent,a=t.hasBgImage,r=this.getProvider(),i=n.comingSoon,l=o.default.createElement(d.UX2.Element.Text,{style:T,children:i,"data-aid":c.default.REVIEWS_NO_DATA_RENDERED});return this.renderMessageInContainer(l,a,e,r)}},{key:"displayMessages",value:function(e,t,n,r){var i=this.state.isMobile,l=this.props.hasBgImage,s=this.getProvider(),c=o.default.createElement(d.UX2.Element.Block,null,o.default.createElement(d.UX2.Element.Text,{style:a({},T,{fontWeight:"bold",fontSize:"medium"}),children:e,"data-aid":n}),o.default.createElement(d.UX2.Element.Text,{style:a({},T,{marginTop:"medium"}),children:t,"data-aid":r}));return this.renderMessageInContainer(c,l,i,s)}},{key:"displayPendingMessage",value:function(){var e=this.props.staticContent;return this.displayMessages(e.txtPendingValidation,e.gmb3Days,c.default.PENDING_VALIDATION_HEADER,c.default.PENDING_VALIDATION_CONTENT)}},{key:"displayWaitMessage",value:function(){var e=this.props.staticContent;return this.displayMessages(e.connectionSuccess,e.twentyFourHourLag,c.default.WAITING_FOR_DATA_HEADER,c.default.WAITING_FOR_DATA_CONTENT)}},{key:"displayConnectOrUpgradeMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.props.renderMode!==d.constants.renderModes.EDIT)return null;var t=this.state.isMobile,n=this.props,r=n.staticContent,i=n.hasBgImage,l=n.renderMode,s=n.publishDate,u=n.publishAfterLastUpgrade,p=this.getProvider(),m={buttonStyle:{marginTop:"medium",backgroundColor:"#00A4A6",cursor:"pointer",display:"inline-block",fontFamily:"GD Sherpa, Arial, sans-serif",fontSize:"16px",fontWeight:"bold",textDecoration:"none",padding:"12px 25px",borderRadius:"3px",borderWidth:"0px",color:"#ffffff",opacity:"1",textTransform:"none",":hover":{backgroundColor:"#09757A"}}},E=b.concat(w).includes(p)&&(!s||u);E&&(m.buttonStyle.opacity="0.6",m.buttonStyle.pointerEvents="none");var g=l===d.constants.renderModes.EDIT,v=f.ProviderConnectDataEvents[p],h=f.ProviderName[p],y=r.comingSoon,R=e?r.upgradeNow:r.connectBtnText.replace("{provider}",h),C=r.publishMessage.replace("{provider}",h);g&&(y=e?r.upgradeMessage.replace("{provider}",h):r.connectMsg.replace("{provider}",h));var O=o.default.createElement(d.UX2.Element.Block,null,o.default.createElement(d.UX2.Element.Block,null,o.default.createElement(d.UX2.Element.Text,{style:T,children:y,"data-aid":e?c.default.UPGRADE_TIER_MSG:c.default.REVIEWS_NOT_CONNECTED_MSG}),E&&o.default.createElement(d.UX2.Element.Text,{style:a({},T,{marginTop:"medium"})},C)),g&&o.default.createElement(d.UX2.Element.Link,{style:m.buttonStyle,design:"primary","data-aid":c.default.REVIEWS_CONNECT_BUTTON,onClick:e?this.getConnectProviderHandler(!0):this.getConnectProviderHandler(),"data-event":v},R));return this.renderMessageInContainer(O,i,t,p)}},{key:"renderReviews",value:function(){var e=this.state,t=e.data,n=e.isMobile,a=this.generateReviewsStyles(),r=t.reviews&&t.reviews.length>h;return o.default.createElement(d.UX2.Element.Block,{style:a.container},o.default.createElement(d.UX2.Element.Block,{style:a.cardsContainer},!n&&r&&this.getNavigationArrow(f.ArrowType.LEFT),this.getCards(),!n&&r&&this.getNavigationArrow(f.ArrowType.RIGHT)),!n&&this.getPaginationControl())}},{key:"showWaitMessage",value:function(){var e=this.state,t=e.state,n=e.providerState,a=this.props,r=a.renderMode,i=a.gmbShowPendingMessage,o=a.fbPageId,l=this.getProvider();return r===d.constants.renderModes.EDIT&&t===f.STATES.NOT_SETUP&&(l===f.Providers.GMB?n===f.STATES.CONNECTED&&!i:l===f.Providers.FACEBOOK?!!o:(l===f.Providers.YELP||l===f.Providers.YOTPO)&&n===f.STATES.CONNECTED)}},{key:"isProviderNotSetup",value:function(e){var t=this.state,n=t.providerState;if(t.planUpgradeRequired)return!1;var a=this.props.fbPageId;return b.concat(w).includes(e)?!(n===f.STATES.CONNECTED):e===f.Providers.FACEBOOK?!a:e!==f.Providers.MANUAL}},{key:"providerHasReviews",value:function(e){var t=this.props.manualReviews,n=this.state.state;return e===f.Providers.MANUAL?t&&t.length:n===f.STATES.HAS_REVIEWS}},{key:"render",value:function(){var e=this.state,t=e.isMobile,n=e.data,r=e.state,i=e.planUpgradeRequired,l=this.props,s=l.staticContent,p=l.hasBgImage,m=l.gmbShowPendingMessage,E=l.renderMode,g=l.category,h=l.section,y=this.getProvider(),R=this.getPageLink(n,y),T=this.providerHasReviews(y),b=this.isProviderNotSetup(y),w=m&&!T&&E===d.constants.renderModes.EDIT,C=r===f.STATES.NO_REVIEWS||E!==d.constants.renderModes.EDIT&&r===f.STATES.NOT_SETUP,O=n&&n.metadata&&n.metadata.name||"",S=this.showWaitMessage(),N="50px";E!==d.constants.renderModes.EDIT&&(N=C?"300px":"550px");var P={container:{display:"flex",flexDirection:"column",minHeight:N}};return t&&(P.container.padding="0",P.container.margin="0"),o.default.createElement(d.UX2.Element.Container,{category:p?"accent":g,section:p?"overlay":h,style:P.container},o.default.createElement(v,{onChange:this.handleMatchMedia}),T&&o.default.createElement(d.UX2.Element.Container,{style:P.container},o.default.createElement(u.default,a({},this.props,{hasBgImage:p,overallRating:n.overallRating||0,businessName:O,provider:y,staticContent:s,isMobile:t,pageLink:R,totalReviews:n.totalReviews||0,negativeRecommendations:n.negativeRecommendations||0,positiveRecommendations:n.positiveRecommendations||0})),r===f.STATES.LOADING?o.default.createElement(d.UX2.Element.Loader,{"data-aid":c.default.REVIEWS_LOADER,style:{margin:"0 auto"}}):this.renderReviews()),i&&this.displayConnectOrUpgradeMessage(!0),S&&this.displayWaitMessage(),C&&this.displayNoReviewsMessage(),!T&&b&&this.displayConnectOrUpgradeMessage(),w&&this.displayPendingMessage())}}]),t}();C.propTypes={viewDevice:l.default.string.isRequired,renderMode:l.default.string.isRequired,websiteId:l.default.string.isRequired,accountId:l.default.string.isRequired,isReseller:l.default.bool.isRequired,env:l.default.string.isRequired,staticContent:l.default.object,hasBgImage:l.default.bool,publishDate:l.default.string,category:l.default.string,section:l.default.string,gmbShowPendingMessage:l.default.bool,providerType:l.default.string,fbPageId:l.default.string,planType:l.default.string,publishAfterLastUpgrade:l.default.bool,sourceType:l.default.string,manualReviews:l.default.array,market:l.default.string},t.default=C,e.exports=t.default},function(e,t){e.exports=keyMirror},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),o=u(i),l=u(n(1)),s=n(3),d=n(5),c=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var p={color:"section"},f=[d.Providers.YOTPO],m=[d.Providers.MANUAL],E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"generateReviewBarStyles",value:function(){var e=this.props.provider;return{topBar:{display:"flex",alignItems:"center",alignContent:"center",justifyContent:"center",cursor:"pointer","@md":{padding:"large",marginTop:"large"},"@xs-only":{boxShadow:"none",justifyContent:"center"},"@sm":{justifyContent:"center"}},overallRating:{marginLeft:"small",fontSize:"xxlarge",color:"section"},ratingStar:{backgroundColor:"transparent",marginHorizontal:"medium","@md":{marginHorizontal:"0px"}},overallRatingContainer:{display:"flex",flexDirection:"column",marginLeft:"small"},overallReviews:{fontSize:"medium",textTransform:"none",color:"section"},mobileTopBarContainer:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"0"},businessName:{fontSize:"large",color:"section",marginBottom:"xxsmall"},pageLink:{display:"block",color:"section",":hover":p,":visited":p,textTransform:"none"},pageLinkContainer:{padding:"0",marginBottom:"medium",textAlign:"center"},linkProps:{tag:"a",target:f.includes(e)?"_self":"_blank",rel:f.includes(e)?"alternate":"noopener",style:{display:"block"}}}}},{key:"getBusinessNameBlock",value:function(){var e=this.props.businessName,t=this.generateReviewBarStyles();return o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.REVIEWS_BUSINESS_NAME_RENDERED,style:t.businessName,children:e})}},{key:"getRecommendationPercentage",value:function(){var e=this.props,t=e.positiveRecommendations,n=e.negativeRecommendations;return t>0?Math.ceil(100*t/(t+n)):0}},{key:"getMobileRatingBar",value:function(){var e=this.props,t=e.provider,n=e.overallRating,r=e.positiveRecommendations,i=e.staticContent,l=e.negativeRecommendations,u=this.generateReviewBarStyles();if(t===d.Providers.FACEBOOK&&r>0){var p=this.getRecommendationPercentage(),f=r+l;return o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.RECOMMENDATION_RENDERED,style:a({},u.topBar,{flexDirection:"column"})},o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.RECOMMENDATION_TEXT_RENDERED,style:a({},u.overallRating,{fontWeight:"bolder",fontSize:"large"})},i.percentRecommend.replace("{percent}",p+"%")),o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.RECOMMENDATION_DESC_RENDERED,style:a({},u.overallReviews,{textAlign:"center",marginBottom:"small"})},1===f?i.basedOnOne:i.basedOn.replace("{reviewCount}",f)))}return o.default.createElement(s.UX2.Element.Block,{style:u.topBar},o.default.createElement(s.UX2.Element.Block,{style:u.overallRating},n.toFixed(1)),o.default.createElement(s.UX2.Component.Rating,{"data-aid":c.default.RATING_RENDERED,rating:n,style:u.ratingStar}))}},{key:"getDesktopRatingBar",value:function(){var e=this.props,t=e.provider,n=e.positiveRecommendations,r=e.negativeRecommendations,i=e.overallRating,l=e.totalReviews,u=e.staticContent,p=1===l?u.review:u.reviews;t===d.Providers.YOTPO&&(p=1===l?u.productReview:u.productReviews);var f=this.generateReviewBarStyles();if(t===d.Providers.FACEBOOK&&n>0){var m=this.getRecommendationPercentage(),E=n+r;return o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.RECOMMENDATION_RENDERED,style:f.overallRatingContainer},this.getBusinessNameBlock(),o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.RECOMMENDATION_TEXT_RENDERED,style:a({},f.overallReviews,{fontWeight:"bolder",fontSize:"large"})},u.percentRecommend.replace("{percent}",m+"%")),o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.RECOMMENDATION_DESC_RENDERED,style:f.overallReviews},1===E?u.basedOnOne:u.basedOn.replace("{reviewCount}",E)))}return o.default.createElement(s.UX2.Element.Block,{style:f.overallRatingContainer},this.getBusinessNameBlock(),i>0&&o.default.createElement(s.UX2.Component.Rating,{"data-aid":c.default.RATING_RENDERED,rating:i,style:f.ratingStar}),o.default.createElement(s.UX2.Element.Block,{style:f.overallReviews},p.replace("{totalReviews}",l)))}},{key:"render",value:function(){var e=this.props,t=e.provider,n=e.overallRating,r=e.totalReviews,i=e.businessName,l=e.positiveRecommendations,u=e.negativeRecommendations,p=e.pageLink,f=e.staticContent,E=e.isMobile,g=e.hasBgImage,v=e.category,h=e.section;if(m.includes(t))return o.default.createElement(s.UX2.Element.Block,{style:{marginTop:"large"}});var y=this.generateReviewBarStyles();y.linkProps.href=p;var R=t===d.Providers.YOTPO?f.viewAllProductReviews:f.viewAllReviews,T=t===d.Providers.FACEBOOK&&l>0?l+u:r;return o.default.createElement(s.UX2.Element.Container,{category:g?"accent":v,section:g?"overlay":h},!E&&o.default.createElement(s.UX2.Element.Element,a({},y.linkProps,{style:{"text-decoration-line":"none"}}),o.default.createElement(s.UX2.Element.Block,{style:y.topBar},o.default.createElement(s.UX2.Element.Block,{style:{marginTop:"xxsmall"}},o.default.createElement(s.UX2.Element.Icon,{icon:d.ProviderIcon[t],size:"xlarge"})),t!==d.Providers.FACEBOOK&&n>0&&o.default.createElement(s.UX2.Element.Block,{style:y.overallRating},n.toFixed(1)),o.default.createElement(s.UX2.Element.Block,{style:y.overallRatingContainer},this.getDesktopRatingBar()))),E&&o.default.createElement(s.UX2.Element.Container,{style:y.mobileTopBarContainer},o.default.createElement(s.UX2.Element.Block,{"data-aid":c.default.REVIEWS_BUSINESS_NAME_RENDERED,style:a({},y.businessName,{fontSize:"medium",textAlign:"center",marginTop:"large"}),children:i}),this.getMobileRatingBar(),o.default.createElement(s.UX2.Element.Container,{style:y.pageLinkContainer},o.default.createElement(s.UX2.Element.Element,{tag:"a",target:"_blank",href:p,style:y.pageLink},R.replace("{totalReviews}",1===T?"":T)))))}}]),t}();E.propTypes={provider:l.default.string,overallRating:l.default.number,totalReviews:l.default.number,isMobile:l.default.bool,pageLink:l.default.string,staticContent:l.default.object.isRequired,hasBgImage:l.default.bool,businessName:l.default.string,category:l.default.string,section:l.default.string,positiveRecommendations:l.default.number,negativeRecommendations:l.default.number},E.defaultProps={provider:d.Providers.FACEBOOK,overallRating:0,totalReviews:0},t.default=E,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),o=m(i),l=m(n(11)),s=n(2),d=m(n(1)),c=n(3),u=n(5),p=m(n(12)),f=m(n(4));function m(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=[u.Providers.YOTPO],v={common:{display:"flex",flexGrow:"1",flexShrink:"0",flexBasis:"auto",flexDirection:"column",alignItems:"center",justifyContent:"space-between",marginTop:"xxsmall","@xs-only":{marginTop:"small"}},topContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},photoContainer:{width:"100px",height:"100px",borderRadius:"50%",backgroundColor:"rgba(240,240,240,0.8)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},photoStyles:{width:"100px",height:"100px",display:"inline-block"},firstInitial:{color:"#CBCBCB",lineHeight:"1",paddingVertical:"medium",paddingHorizontal:"medium",fontSize:"xxxlarge"},emptyReview:{fontFamily:"Helvetica, Arial, sans-serif",color:"grey",fontStyle:"italic",fontSize:"small"},reviewBodyContainer:{zIndex:"10",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingTop:"0",paddingHorizontal:"medium",color:"#000",textTransform:"none"},reviewProductLink:{fontSize:"1.13em"},reviewTitle:{fontWeight:"600",marginTop:"xxsmall",marginBottom:"small"},reviewerContainer:E({paddingHorizontal:"medium",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"xsmall"},"@xs-only",{marginTop:"0"}),reviewer:{color:"#000",fontSize:"xsmall",paddingHorizontal:"small"},recommendationContainer:{paddingTop:"medium",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},icons:{facebook:{color:"#4267B2",height:"25px",width:"25px"},recommendation:{width:"20px"}},fullReview:E({position:"absolute",width:"100%",height:"100%",top:"100%",opacity:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"action",color:"action",padding:"small",transition:"all 0.3s ease"},"@md",{padding:"medium"}),fullReviewHover:E({overflow:"hidden"},"@md",{":hover":{".fullreview":{opacity:1,top:0,zIndex:11}}}),fullReviewClose:{position:"absolute",top:"16px",right:"16px",cursor:"pointer"},fullReviewOverlayShowOnMobile:{opacity:1,top:0,zIndex:11},linkContainer:E({marginTop:"medium"},"@xs-only",{marginTop:"small"}),ratingStars:E({marginTop:"medium"},"@xs-only",{marginTop:"small"})},h=[u.Providers.FACEBOOK,u.Providers.YELP,u.Providers.YOTPO],y=[u.Providers.MANUAL],R=[u.Providers.YOTPO],T=["positive","negative"],b=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={truncated:!1,imageFailed:!1,showFullReviewOverlay:!1,showExternalLink:!1},e.handleTruncate=e.handleTruncate.bind(e),e.toggleFullReviewOverlay=e.toggleFullReviewOverlay.bind(e),e.handleImageError=e.handleImageError.bind(e),e.getTotalReviewLines=e.getTotalReviewLines.bind(e),e.cardComponent=o.default.createRef(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"handleTruncate",value:function(e){var t=this.props.provider;this.state.truncated!==e&&this.setState({truncated:e,showExternalLink:h.includes(t)})}},{key:"toggleFullReviewOverlay",value:function(){this.setState({showFullReviewOverlay:!this.state.showFullReviewOverlay})}},{key:"handleImageError",value:function(){this.setState({imageFailed:!0})}},{key:"getReviewerPhoto",value:function(e,t){var n=this.props.sourceType,r=this.state.imageFailed,i=void 0,l=void 0,s=(l=e.photo?e.photo:(i=e.imageData||{}).image||"")&&(l.toLowerCase().startsWith("http")||l.startsWith("//"))?l:null,d="dynamic"===n;e.metadata&&e.metadata.reviewerId&&u.ProviderPhotoUrls[t]&&(s=u.ProviderPhotoUrls[t].replace("{id}",e.metadata.reviewerId));var p=e.name?e.name.charAt(0).toUpperCase():null,m=d?{src:s}:{imageData:i,imageSrcCallback:function(e){return e?e.replace(/{width}/g,100).replace(/{height}/g,100):""}};return o.default.createElement(c.UX2.Element.Block,{style:v.photoContainer},s&&!r&&o.default.createElement(c.UX2.Element.Image.Thumbnail,a({tag:"img","data-aid":f.default.REVIEWER_PHOTO_RENDERED,style:v.photoStyles,onError:this.handleImageError},m)),(!s||r)&&p&&o.default.createElement(c.UX2.Element.Heading,{"data-aid":f.default.REVIEWER_INITIAL_RENDERED,children:p,style:v.firstInitial}))}},{key:"getRatingBlock",value:function(){var e=this.props,t=e.provider,n=e.data,a=e.staticContent,r=e.renderMode;return t===u.Providers.FACEBOOK&&n.recommendation&&T.includes(n.recommendation)?o.default.createElement(c.UX2.Element.Block,{"data-aid":f.default.RECOMMENDATION_RENDERED,style:v.recommendationContainer},o.default.createElement(c.UX2.Element.Icon,{"data-aid":f.default.RECOMMENDATION_ICON_RENDERED,icon:u.RecommendationIcons[n.recommendation],style:v.icons.recommendation}),o.default.createElement(c.UX2.Element.Text,{"data-aid":f.default.RECOMMENDATION_TEXT_RENDERED,style:{paddingLeft:"small"}},a[u.RecommendationStrings[n.recommendation]])):t===u.Providers.MANUAL&&r!==c.constants.renderModes.EDIT&&"0"===n.rating?o.default.createElement(c.UX2.Element.Block,{style:{paddingBottom:"medium"}}):o.default.createElement(c.UX2.Component.Rating,{"data-aid":f.default.RATING_RENDERED,style:v.ratingStars,rating:n.rating})}},{key:"getTruncatedLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.default.createElement(p.default,{lines:1,ellipsis:n?'..."':"...",trimWhitespace:!0,width:e?200:250},""+t)}},{key:"sanitizeLink",value:function(e,t){return g.includes(t)||!e||e.startsWith("http")?e:"//"+e}},{key:"componentDidUpdate",value:function(e){var t=this.props.data,n=e.data;t.photo===n.photo&&(0,s.get)(t,"imageData.image")===(0,s.get)(n,"imageData.image")||this.setState({imageFailed:!1})}},{key:"componentDidMount",value:function(){var e=this.cardComponent.current&&l.default.findDOMNode(this.cardComponent.current),t=e&&e.offsetWidth||0;this.setState({currentCardWidth:t})}},{key:"getTotalReviewLines",value:function(e){var t=this.props,n=t.isMobile,a=t.provider,r=this.state.currentCardWidth;if(n||!n&&e)return 3;var i=a===u.Providers.MANUAL?4:3;return r&&r<=300?2:i}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.provider,r=e.isMobile,i=e.desktopMobilePreview,l=e.link,d=e.staticContent,m=e.market,g=this.state,h=g.truncated,T=g.showExternalLink,b=g.showFullReviewOverlay,w=y.includes(n)&&(0,s.get)(t,"link",!1),C=h&&!(w||T),O=R.includes(n)&&!!(t&&t.metadata&&t.metadata.product),S=R.includes(n)?"0.6":"1",N=t&&t.metadata&&t.metadata.title||"",P=this.getTotalReviewLines(w),D="large",_={card:E({textAlign:"center",borderWidth:"0px",position:"relative",boxShadow:"2px 6px 30px 0 rgba(0,0,0,0.18)",paddingVertical:"large"},"@xs-only",{paddingVertical:"medium"})},k=C?v.fullReviewHover:{},I=b?v.fullReviewOverlayShowOnMobile:{};r&&(v.reviewer.fontSize="small",D="small",i||(_.card.minWidth="300px"));var M=t.date&&!!Date.parse(t.date)&&new Date(t.date)||null;return o.default.createElement(c.UX2.Element.Block,null,o.default.createElement(c.UX2.Group.Card,{ref:this.cardComponent,size:D,style:a({},v.common,_.card,k)},C&&o.default.createElement(c.UX2.Element.Block,{style:a({},v.fullReview,I),className:"fullreview",category:"accent",section:"overlay"},r&&o.default.createElement(c.UX2.Element.Icon,{icon:"close",style:v.fullReviewClose,onClick:this.toggleFullReviewOverlay}),o.default.createElement(c.UX2.Element.Text,{children:t.body,style:{color:"action"}})),o.default.createElement(c.UX2.Element.Container,{style:v.topContainer},this.getReviewerPhoto(t,n),this.getRatingBlock()),o.default.createElement(c.UX2.Element.Block,{style:v.reviewBodyContainer},O&&o.default.createElement(c.UX2.Element.Block,null,o.default.createElement(c.UX2.Element.Link,{style:v.reviewProductLink,"data-aid":f.default.PRODUCT_LINK_RENDERED,target:"_self",href:this.sanitizeLink(t.link||l,n)},this.getTruncatedLine(r,t.metadata.product))),N&&o.default.createElement(c.UX2.Element.Block,{"data-aid":f.default.REVIEW_TITLE_RENDERED,style:v.reviewTitle},this.getTruncatedLine(r,'"'+N+'"',!0)),t.body&&o.default.createElement(c.UX2.Element.Block,{style:{opacity:S}},o.default.createElement(p.default,{"data-aid":f.default.USER_REVIEW_RENDERED,lines:P,ellipsis:'..."',trimWhitespace:!0,width:r?200:250,onTruncate:this.handleTruncate},'"'+t.body+'"')),!t.body&&o.default.createElement(c.UX2.Element.Text,{"data-aid":f.default.STATIC_REVIEW_RENDERED,style:v.emptyReview},d.noWrittenReviews),o.default.createElement(c.UX2.Element.Block,{style:v.linkContainer},(T||w)&&o.default.createElement(c.UX2.Element.MoreLink.Forward,{"data-aid":f.default.READ_MORE_RENDERED,target:O?"_self":"_blank",href:this.sanitizeLink(t.link||l,n)},d.readFullReview),r&&h&&!(w||T)&&o.default.createElement(c.UX2.Element.Link,{tag:"span",onClick:this.toggleFullReviewOverlay,children:d.viewMore||"View More"}))),o.default.createElement(c.UX2.Element.Block,{style:v.reviewerContainer},o.default.createElement(c.UX2.Element.Icon,{icon:u.ProviderAlternateIcon[n],size:"medium",style:v.icons[n]}),o.default.createElement(c.UX2.Element.Text,{"data-aid":f.default.REVIEWER_INFO_RENDERED,tag:"p",style:v.reviewer},o.default.createElement("strong",null,t.name," ",t.name&&M?" - ":"")," ",M&&M.toLocaleDateString(m)||""))))}}]),t}();b.propTypes={data:d.default.object.isRequired,provider:d.default.string.isRequired,link:d.default.string,isMobile:d.default.bool,nextPageHandler:d.default.func,previousPageHandler:d.default.func,desktopMobilePreview:d.default.bool,staticContent:d.default.object,renderMode:d.default.string.isRequired,market:d.default.string,sourceType:d.default.string},t.default=b,e.exports=t.default},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n.n(a),i=n(1),o=n.n(i),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var d=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return i.state={},i.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},i.elements={},i.onResize=i.onResize.bind(i),i.onTruncate=i.onTruncate.bind(i),i.calcTargetWidth=i.calcTargetWidth.bind(i),i.measureWidth=i.measureWidth.bind(i),i.getLines=i.getLines.bind(i),i.renderLine=i.renderLine.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),s(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,n=this.onResize,a=document.createElement("canvas");this.canvasContext=a.getContext("2d"),t(function(){e&&e.parentNode.removeChild(e)}),window.addEventListener("resize",n)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate(),this.props.width!==e.width&&this.calcTargetWidth()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,n=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(n)}},{key:"innerText",value:function(e){var t=document.createElement("div"),n="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var a=t[n],r=document.createElement("div");return r.innerHTML="foo<br/>bar","foo\nbar"!==r[n].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),a=t[n]),a}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"==typeof t&&(this.timeout=window.requestAnimationFrame(function(){t(e)}))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,n=this.calcTargetWidth,a=this.canvasContext,r=this.props.width;if(t){var i=r||Math.floor(t.parentNode.getBoundingClientRect().width);if(!i)return window.requestAnimationFrame(function(){return n(e)});var o=window.getComputedStyle(t),l=[o["font-weight"],o["font-style"],o["font-size"],o["font-family"]].join(" ");a.font=l,this.setState({targetWidth:i},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,n=t.lines,a=t.ellipsis,i=t.trimWhitespace,o=this.state.targetWidth,l=this.innerText,s=this.measureWidth,d=this.onTruncate,c=this.trimRight,u=[],p=l(e.text).split("\n").map(function(e){return e.split(" ")}),f=!0,m=this.ellipsisWidth(this.elements.ellipsis),E=1;E<=n;E++){var g=p[0];if(0!==g.length){var v=g.join(" ");if(s(v)<=o&&1===p.length){f=!1,u.push(v);break}if(E===n){for(var h=g.join(" "),y=0,R=h.length-1;y<=R;){var T=Math.floor((y+R)/2);s(h.slice(0,T+1))+m<=o?y=T+1:R=T-1}var b=h.slice(0,y);if(i)for(b=c(b);!b.length&&u.length;){b=c(u.pop())}v=r.a.createElement("span",null,b,a)}else{for(var w=0,C=g.length-1;w<=C;){var O=Math.floor((w+C)/2);s(g.slice(0,O+1).join(" "))<=o?w=O+1:C=O-1}if(0===w){E=n-1;continue}v=g.slice(0,w).join(" "),p[0].splice(0,w)}u.push(v)}else u.push(),p.shift(),E--}return d(f),u}},{key:"renderLine",value:function(e,t,n){if(t===n.length-1)return r.a.createElement("span",{key:t},e);var a=r.a.createElement("br",{key:t+"br"});return e?[r.a.createElement("span",{key:t},e),a]:a}},{key:"render",value:function(){var e=this,t=this.elements.target,n=this.props,a=n.children,i=n.ellipsis,o=n.lines,s=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(n,["children","ellipsis","lines"]),d=this.state.targetWidth,c=this.getLines,u=this.renderLine,p=this.onTruncate,f=void 0;return"undefined"!=typeof window&&!(!t||!d)&&(o>0?f=c().map(u):(f=a,p(!1))),delete s.onTruncate,delete s.trimWhitespace,r.a.createElement("span",l({},s,{ref:function(t){e.elements.target=t}}),r.a.createElement("span",null,f),r.a.createElement("span",{ref:function(t){e.elements.text=t}},a),r.a.createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},i))}}]),t}();d.propTypes={children:o.a.node,ellipsis:o.a.node,lines:o.a.oneOfType([o.a.oneOf([!1]),o.a.number]),trimWhitespace:o.a.bool,width:o.a.number,onTruncate:o.a.func},d.defaultProps={children:"",ellipsis:"…",lines:1,trimWhitespace:!1,width:0},t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WEBSITE_PROPERTIES={GMB_STATUS_KEY:"gmbStatusResponse",API_RESPONSE_KEY:"apiRequestResponseData"},t.GMB_STATUS={PUBLISHED:"PUBLISHED",DUPLICATE:"DUPLICATE",PENDING:"PENDING",UNKNOWN:"UNKNOWN"},t.SOURCE_TYPES={DYNAMIC:"dynamic",STATIC:"static"},t.MANUAL_REVIEWS={ROUTE:"/reviews/$",PATH:"/reviews",PHOTO:"/reviews/$/photo"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMappedManualReviews=void 0;var a=n(2);t.getMappedManualReviews=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Anonymous",n={totalReviews:e.length,reviews:[]};return e.length&&(0,a.each)(e,function(e){n.reviews.push({imageData:e.photo||{},name:e.name||t,date:e.date||"",rating:e.rating,body:e.body,link:e.link||null,metadata:{title:e.title}})}),n}}]);